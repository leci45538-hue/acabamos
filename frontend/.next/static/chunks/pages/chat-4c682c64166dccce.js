(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{3454:function(e,t,r){"use strict";var a,s;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(7663)},2583:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return r(4425)}])},3120:function(e,t,r){"use strict";r.d(t,{Z:function(){return Footer}});var a=r(5893);function Footer(){return(0,a.jsx)("footer",{className:"w-full bg-gray-900 text-white mt-20",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Leidy Cleaner"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Sua solu\xe7\xe3o inteligente para limpeza profissional e confi\xe1vel."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold mb-4",children:"Links R\xe1pidos"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"hover:text-white",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/servicos",className:"hover:text-white",children:"Servi\xe7os"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/agendar",className:"hover:text-white",children:"Agendar"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/dashboard",className:"hover:text-white",children:"Dashboard"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold mb-4",children:"Contato"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,a.jsx)("li",{children:"\uD83D\uDCDE +55 51 98030-3740"}),(0,a.jsx)("li",{children:"\uD83D\uDCE7 contato@leidycleaner.com"}),(0,a.jsx)("li",{children:"\uD83D\uDCCD Porto Alegre, RS"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold mb-4",children:"Pagamento"}),(0,a.jsxs)("div",{className:"space-y-2 text-gray-400",children:[(0,a.jsx)("p",{children:"\uD83D\uDCB3 PIX"}),(0,a.jsx)("p",{children:"\uD83D\uDCB3 Cart\xe3o de Cr\xe9dito"}),(0,a.jsx)("p",{children:"\uD83D\uDCB3 Mercado Pago"})]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Leidy Cleaner. Todos os direitos reservados."]})})]})})}r(7294)},7185:function(e,t,r){"use strict";r.d(t,{Z:function(){return Header}});var a=r(5893),s=r(7294),n=r(1664),i=r.n(n),o=r(5816);function ThemeSwitcher(){let{theme:e,toggleTheme:t}=(0,s.useContext)(o.N);return(0,a.jsx)("button",{onClick:t,className:"px-3 py-1 rounded-md border border-gray-200 hover:bg-gray-100",children:"dark"===e?"\uD83C\uDF19 Dark":"☀️ Light"})}function Header(){let[e,t]=(0,s.useState)(!1);return(0,a.jsxs)("header",{className:"w-full sticky top-0 z-50 bg-white shadow-md",children:[(0,a.jsxs)("div",{className:"container flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i(),{href:"/",children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:"Leidy Cleaner"})}),(0,a.jsx)("div",{className:"text-sm text-muted hidden md:block",children:"+55 51 98030-3740"})]}),(0,a.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,a.jsx)(i(),{href:"/",className:"hover:text-blue-600",children:"Home"}),(0,a.jsx)(i(),{href:"/servicos",className:"hover:text-blue-600",children:"Servi\xe7os"}),(0,a.jsx)(i(),{href:"/agendar",className:"hover:text-blue-600",children:"Agendar"}),(0,a.jsx)(i(),{href:"/dashboard",className:"hover:text-blue-600",children:"Minha Conta"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(ThemeSwitcher,{}),(0,a.jsx)(i(),{href:"/agendar",className:"hidden md:block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Agendar"}),(0,a.jsx)("button",{onClick:()=>t(!e),className:"md:hidden",children:"☰"})]})]}),e&&(0,a.jsxs)("div",{className:"md:hidden bg-gray-50 border-t",children:[(0,a.jsx)(i(),{href:"/",className:"block py-2 px-4",children:"Home"}),(0,a.jsx)(i(),{href:"/servicos",className:"block py-2 px-4",children:"Servi\xe7os"}),(0,a.jsx)(i(),{href:"/agendar",className:"block py-2 px-4",children:"Agendar"}),(0,a.jsx)(i(),{href:"/dashboard",className:"block py-2 px-4",children:"Minha Conta"})]})]})}},4425:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Chat}});var a=r(5893),s=r(7294),n=r(7185),i=r(3120),o=r(2797),l=r(3454),Common_ChatComponent=function(e){let{bookingId:t,userId:r,userName:n="Voc\xea"}=e,[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(!0),[x,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)("online"),b=(0,s.useRef)(null),{addToast:v}=(0,o.p)(),scrollToBottom=()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{scrollToBottom()},[i]),(0,s.useEffect)(()=>{let fetchMessages=async()=>{try{let e=l.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",r=await fetch("".concat(e,"/api/chat/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},credentials:"include"});if(!r.ok)throw Error("Falha ao carregar mensagens");let a=await r.json();c(a.messages||generateMockMessages()),m(!1),simulateWebSocket()}catch(e){console.error("Erro ao carregar mensagens:",e),c(generateMockMessages()),m(!1),simulateWebSocket()}};fetchMessages()},[t]);let generateMockMessages=()=>[{id:1,sender:"staff",senderName:"Ana Silva",message:"Ol\xe1! Confirmo o agendamento para amanh\xe3 \xe0s 09:00",timestamp:new Date(Date.now()-36e5),status:"lido"},{id:2,sender:"client",senderName:"Maria",message:"Perfeito! At\xe9 amanh\xe3 ent\xe3o",timestamp:new Date(Date.now()-3e6),status:"lido"},{id:3,sender:"staff",senderName:"Ana Silva",message:"Vou chegar 10 minutos mais cedo para verificar tudo",timestamp:new Date(Date.now()-24e5),status:"lido"}],simulateWebSocket=()=>{p("online")},handleSendMessage=async e=>{if(e.preventDefault(),!d.trim()){v("Mensagem vazia","warning");return}f(!0);try{let e=l.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",r=await fetch("".concat(e,"/api/chat/").concat(t,"/send"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:JSON.stringify({message:d}),credentials:"include"});if(!r.ok)throw Error("Falha ao enviar mensagem");let a=await r.json(),s={id:a.id||Date.now(),sender:"client",senderName:n,message:d,timestamp:new Date,status:"enviado"};c([...i,s]),u(""),v("Mensagem enviada","success"),f(!1)}catch(e){console.error("Erro ao enviar:",e),v("Erro ao enviar mensagem","error"),f(!1)}},handleRemoveMessage=e=>{c(i.filter(t=>t.id!==e)),v("Mensagem removida","info")},formatTime=e=>new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),formatDate=e=>{let t=new Date,r=new Date(t);r.setDate(r.getDate()-1);let a=new Date(e);return a.toDateString()===t.toDateString()?"Hoje":a.toDateString()===r.toDateString()?"Ontem":a.toLocaleDateString("pt-BR")};return h?(0,a.jsx)("div",{className:"p-6 text-center",children:"⏳ Carregando chat..."}):(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-white rounded-lg shadow-lg overflow-hidden max-h-96",children:[(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-xl",children:"\uD83D\uDCAC"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 rounded-full ".concat("online"===g?"bg-green-400":"bg-gray-400")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:"Chat - Agendamento"}),(0,a.jsx)("p",{className:"text-xs text-blue-100",children:"online"===g?"\uD83D\uDFE2 Online":"⚪ Offline"})]})]}),(0,a.jsx)("button",{className:"text-white hover:bg-white/20 p-2 rounded transition",children:"⋮"})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[i.map((e,t)=>{let r=0===t||formatDate(i[t-1].timestamp)!==formatDate(e.timestamp);return(0,a.jsxs)("div",{children:[r&&(0,a.jsxs)("div",{className:"flex items-center gap-2 my-4",children:[(0,a.jsx)("div",{className:"flex-1 border-t border-gray-300"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 px-2",children:formatDate(e.timestamp)}),(0,a.jsx)("div",{className:"flex-1 border-t border-gray-300"})]}),(0,a.jsxs)("div",{className:"flex gap-2 ".concat("client"===e.sender?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-sm font-bold",children:e.senderName.charAt(0)}),(0,a.jsxs)("div",{className:"max-w-xs lg:max-w-md ".concat("client"===e.sender?"items-end":"items-start"," flex flex-col"),children:[(0,a.jsx)("p",{className:"text-xs font-semibold ".concat("client"===e.sender?"text-right":""),children:e.senderName}),(0,a.jsxs)("div",{className:"mt-1 p-3 rounded-lg text-sm ".concat("client"===e.sender?"bg-blue-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-900 rounded-bl-none"," hover:shadow-md transition group relative"),children:[(0,a.jsx)("p",{className:"break-words",children:e.message}),(0,a.jsx)("button",{onClick:()=>handleRemoveMessage(e.id),className:"absolute -top-6 right-0 text-xs opacity-0 group-hover:opacity-100 transition bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"✕"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1 ".concat("client"===e.sender?"text-right":""),children:[formatTime(e.timestamp)," ","lido"===e.status?"✓✓":"enviado"===e.status?"✓":"⏱"]})]})]})]},e.id)}),(0,a.jsx)("div",{ref:b})]}),(0,a.jsxs)("form",{onSubmit:handleSendMessage,className:"p-4 border-t border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",className:"flex-shrink-0 px-3 py-2 text-xl bg-gray-100 hover:bg-gray-200 rounded transition",title:"Anexar arquivo",children:"\uD83D\uDCCE"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Digite sua mensagem...",disabled:x,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{type:"submit",disabled:x||!d.trim(),className:"flex-shrink-0 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:x?"⏳":"➤"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["\uD83D\uDCA1 Use ",(0,a.jsx)("strong",{children:"Enter"})," para enviar, ",(0,a.jsx)("strong",{children:"Shift+Enter"})," para quebra de linha"]})]})]})};function Chat(){let[e]=(0,s.useState)("booking_001");return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("main",{className:"flex-grow p-6 bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDCAC Chat do Agendamento"}),(0,a.jsx)(Common_ChatComponent,{bookingId:e,userId:"user_123",userName:"Maria Silva"})]})}),(0,a.jsx)(i.Z,{})]})}},7663:function(e){!function(){var t={229:function(e){var t,r,a,s=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var n=[],i=!1,o=-1;function cleanUpNextTick(){i&&a&&(i=!1,a.length?n=a.concat(n):o=-1,n.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=n.length;t;){for(a=n,n=[];++o<t;)a&&a[o].run();o=-1,t=n.length}a=null,i=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];n.push(new Item(e,t)),1!==n.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},n=!0;try{t[e](s,s.exports,__nccwpck_require__),n=!1}finally{n&&delete r[e]}return s.exports}__nccwpck_require__.ab="//";var a=__nccwpck_require__(229);e.exports=a}()}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=2583)}),_N_E=e.O()}]);